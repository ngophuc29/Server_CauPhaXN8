import { SdkManagerBuilder } from '../src/SdkManagerBuilder';
import { AdskEnvironment, ApsConfiguration } from '../src/ApsConfiguration';
import { ResiliencyConfiguration } from '../src/ResiliencyConfiguration';
import { Logger } from '../src/Logger';
describe('Sdk Manager Builder', () => {
    it('Default Initialization of Sdk Manager Builder', () => {
        const sdkManager = SdkManagerBuilder.create().build();
        expect(sdkManager).toEqual(expect.objectContaining({
            _resiliencyConfiguration: expect.objectContaining({
                backoffInterval: 10,
                circuitBreakerInterval: 60 * 1000,
                retryCount: 5,
                timeOutValue: 15000
            })
        }));
    });
    it('Resiliency Configuration into Sdk Manager Builder', () => {
        const apsConfigurationParams = {
            environment: AdskEnvironment.Stg
        };
        const sdkManager = SdkManagerBuilder.create()
            .addApsConfiguration(new ApsConfiguration(apsConfigurationParams))
            .addResiliencyConfiguration(new ResiliencyConfiguration(5, 5, 5))
            .addLogger(new Logger())
            .build();
        expect(sdkManager).toEqual(expect.objectContaining({
            _resiliencyConfiguration: expect.objectContaining({
                backoffInterval: 5,
                circuitBreakerInterval: 5,
                retryCount: 5
            })
        }));
    });
});
